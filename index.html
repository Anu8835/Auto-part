<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Molding Expert Pro - AI Solver</title>
    <style>
        :root { --primary: #3b82f6; --success: #22c55e; --danger: #ef4444; --bg: #0f172a; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); color: white; text-align: center; }
        
        /* Premium Lock Overlay */
        #lock-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 9999; padding: 20px; box-sizing: border-box; }
        .lock-card { background: white; color: #1e293b; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .device-id-box { background: #f1f5f9; padding: 10px; border-radius: 8px; font-family: monospace; font-weight: bold; color: var(--danger); margin: 15px 0; }
        
        /* UI Elements */
        .header { background: #1e293b; padding: 15px; border-bottom: 2px solid var(--primary); font-weight: bold; }
        #main-app { padding: 10px; }
        #camera-box { position: relative; border-radius: 15px; overflow: hidden; background: #000; border: 2px solid #334155; }
        video, canvas { width: 100%; display: block; }
        
        .btn { width: 100%; padding: 15px; border-radius: 10px; border: none; font-size: 17px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-wa { background: #25D366; color: white; text-decoration: none; display: block; }
        .btn-scan { background: var(--success); color: white; }
        .input-field { width: 90%; padding: 12px; margin: 10px 0; border: 2px solid #ddd; border-radius: 8px; text-align: center; font-size: 18px; }
        
        .trial-info { font-size: 12px; margin-bottom: 8px; padding: 5px; border-radius: 5px; }
        .res-card { display: none; background: white; color: #333; padding: 20px; border-radius: 15px; text-align: left; margin-top: 15px; }
    </style>
</head>
<body>

    <div id="lock-screen">
        <div class="lock-card">
            <h2 style="color: var(--danger); margin:0;">‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§! üîí</h2>
            <p style="font-size: 14px;">‡§Ü‡§™‡§ï‡•á 10 ‡§´‡•ç‡§∞‡•Ä ‡§ü‡•ç‡§∞‡§æ‡§Ø‡§≤ ‡§ñ‡§§‡•ç‡§Æ ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç‡•§ ‡§´‡•Å‡§≤ ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•Ä <b>Device ID</b> ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§™‡§∞ ‡§≠‡•á‡§ú‡•á‡§Ç‡•§</p>
            
            <div class="device-id-box" id="display-device-id">MOLD-XXXXX</div>
            
            <a id="wa-link" href="#" class="btn btn-wa">WhatsApp ‡§™‡§∞ ID ‡§≠‡•á‡§ú‡•á‡§Ç</a>
            
            <hr style="margin: 20px 0;">
            <input type="text" id="act-code" class="input-field" placeholder="Activation Code">
            <button class="btn" style="background:var(--primary); color:white;" onclick="validateCode()">‡§è‡§ï‡•ç‡§ü‡§ø‡§µ‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
        </div>
    </div>

    <div id="main-app">
        <div class="header">UNIVERSAL SOLVER AI</div>
        <div id="trial-msg" class="trial-info" style="background: var(--danger);"></div>

        <select id="material" style="width:100%; padding:10px; margin:10px 0; border-radius:8px; background:#1e293b; color:white;">
            <option value="POM">POM (Acetal)</option>
            <option value="PBT">PBT (High Temp)</option>
            <option value="LDPE">LDPE</option>
            <option value="PA66">Nylon 66</option>
            <option value="PC">Polycarbonate</option>
            <option value="ABS">ABS</option>
        </select>

        <div id="camera-box">
            <video id="video" autoplay playsinline></video>
            <canvas id="canvas" style="display:none;"></canvas>
        </div>

        <button class="btn btn-scan" id="scan-btn" onclick="startScan()">üì∏ ‡§™‡§æ‡§∞‡•ç‡§ü ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§∞‡•á‡§Ç</button>

        <div id="res-card" class="res-card">
            <h3 style="margin-top:0;">Diagnosis Result</h3>
            <div id="res-content"></div>
            <button onclick="location.reload()" style="width:100%; margin-top:15px; padding:10px; background:#444; color:white; border:none; border-radius:8px;">‡§®‡§Ø‡§æ ‡§∏‡•ç‡§ï‡•à‡§®</button>
        </div>
    </div>

    <script>
        const MY_WHATSAPP = "91XXXXXXXXXX"; // ‡§Ö‡§™‡§®‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        
        // 1. Device ID Logic
        function getDeviceID() {
            let id = localStorage.getItem('m_dev_id');
            if (!id) {
                id = 'MOLD-' + Math.random().toString(36).substr(2, 5).toUpperCase();
                localStorage.setItem('m_dev_id', id);
            }
            return id;
        }

        const devID = getDeviceID();
        let usage = parseInt(localStorage.getItem('m_usage') || '0');
        let isPremium = localStorage.getItem('m_premium') === 'true';

        // UI Update
        function updateDisplay() {
            if (!isPremium && usage >= 10) {
                document.getElementById('lock-screen').style.display = 'block';
                document.getElementById('display-device-id').innerText = devID;
                document.getElementById('wa-link').href = `https://wa.me/${MY_WHATSAPP}?text=Hi, I want to activate my app. My Device ID is: ${devID}`;
            }
            const msg = document.getElementById('trial-msg');
            msg.innerText = isPremium ? "PREMIUM ACCESS: ACTIVE" : `‡§´‡•ç‡§∞‡•Ä ‡§ü‡•ç‡§∞‡§æ‡§Ø‡§≤ ‡§¨‡§æ‡§ï‡•Ä: ${10 - usage}`;
            msg.style.background = isPremium ? "#22c55e" : "#ef4444";
        }

        // 2. Activation Logic (Anti-Share)
        function validateCode() {
            const input = document.getElementById('act-code').value.trim();
            // ‡§∏‡§ø‡§ï‡•ç‡§Ø‡•ã‡§∞‡§ø‡§ü‡•Ä ‡§≤‡•â‡§ú‡§ø‡§ï: ID ‡§ï‡§æ ‡§â‡§≤‡•ç‡§ü‡§æ + 2026 = ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•Ä‡§ï‡•ç‡§∞‡•á‡§ü ‡§ï‡•ã‡§°
            const correctCode = devID.split('').reverse().join('') + "26"; 

            if (input === correctCode) {
                localStorage.setItem('m_premium', 'true');
                alert("‡§¨‡§ß‡§æ‡§à ‡§π‡•ã! ‡§´‡•Å‡§≤ ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§è‡§ï‡•ç‡§ü‡§ø‡§µ‡•á‡§ü ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§");
                location.reload();
            } else {
                alert("‡§ó‡§≤‡§§ ‡§ï‡•ã‡§°! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§∏‡•á ‡§ï‡•ã‡§° ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§");
            }
        }

        function startScan() {
            if (!isPremium) {
                usage++;
                localStorage.setItem('m_usage', usage);
            }
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0);
            
            video.style.display = 'none';
            canvas.style.display = 'block';
            document.getElementById('scan-btn').style.display = 'none';
            document.getElementById('res-card').style.display = 'block';
            
            // ‡§°‡§æ‡§Ø‡§ó‡•ç‡§®‡•ã‡§∏‡§ø‡§∏ ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§®
            const mat = document.getElementById('material').value;
            document.getElementById('res-content').innerHTML = `
                <b>Material:</b> ${mat}<br>
                <b>Problem:</b> Clamping Force Insufficient<br>
                <b>Solution:</b> Increase tonnage by 10% and clean parting lines.
            `;
            updateDisplay();
        }

        navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } }).then(s => video.srcObject = s);
        updateDisplay();
    </script>
</body>
</html>